<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîä Audio Debug Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a0000 0%, #000000 100%);
            color: #fff;
            padding: 40px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #ff6b00;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(255, 107, 0, 0.8);
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 107, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .test-section h2 {
            color: #ff6b00;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 15px 25px;
            font-size: 16px;
            font-weight: bold;
            border: 2px solid #ff6b00;
            border-radius: 10px;
            background: rgba(255, 107, 0, 0.1);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        
        button:hover {
            background: rgba(255, 107, 0, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(255, 107, 0, 0.5);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .console-output {
            background: #000;
            border: 2px solid #ff6b00;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .log-line {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid transparent;
        }
        
        .log-success {
            color: #00ff00;
            border-left-color: #00ff00;
        }
        
        .log-error {
            color: #ff0000;
            border-left-color: #ff0000;
        }
        
        .log-warning {
            color: #ffaa00;
            border-left-color: #ffaa00;
        }
        
        .log-info {
            color: #00aaff;
            border-left-color: #00aaff;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-ready {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }
        
        .status-loading {
            background: #ffaa00;
            box-shadow: 0 0 10px #ffaa00;
        }
        
        .status-error {
            background: #ff0000;
            box-shadow: 0 0 10px #ff0000;
        }
        
        .audio-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .audio-card {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 107, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
        }
        
        .audio-card h3 {
            color: #ff6b00;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .audio-card p {
            font-size: 0.9em;
            color: #ccc;
            margin: 5px 0;
        }
        
        .clear-btn {
            background: rgba(255, 0, 0, 0.2);
            border-color: #ff0000;
        }
        
        .clear-btn:hover {
            background: rgba(255, 0, 0, 0.4);
        }
    </style>
</head>
<body>
    <!-- Audio Elements -->
    <audio id="jumpScareSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-horror-lose-2028.mp3" type="audio/mpeg">
    </audio>
    <audio id="bloodSplatterSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-blood-spatter-2357.mp3" type="audio/mpeg">
    </audio>
    <audio id="screamSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-horror-scream-397.mp3" type="audio/mpeg">
    </audio>
    <audio id="ghostSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-ghost-cry-264.mp3" type="audio/mpeg">
    </audio>
    <audio id="doorCreak" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-creaking-door-331.mp3" type="audio/mpeg">
    </audio>
    <audio id="chainSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-chains-rattle-2854.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <h1>üîä AUDIO DEBUG CONSOLE üîä</h1>
        
        <!-- Test Section 1: Preload Test -->
        <div class="test-section">
            <h2>1Ô∏è‚É£ Preload & Initialize Test</h2>
            <p>Klik tombol ini PERTAMA untuk unlock audio di browser!</p>
            <div class="button-grid">
                <button onclick="preloadAllAudio()">üîì Unlock Audio</button>
                <button onclick="checkAudioStatus()">üìä Check Status</button>
                <button onclick="testBrowserSupport()">üåê Browser Support</button>
            </div>
        </div>

        <!-- Test Section 2: Individual Sounds -->
        <div class="test-section">
            <h2>2Ô∏è‚É£ Individual Sound Tests</h2>
            <p>Test setiap audio satu per satu</p>
            <div class="button-grid">
                <button onclick="testSound('jumpScareSound', 0.8)">üò± Jump Scare</button>
                <button onclick="testSound('bloodSplatterSound', 0.6)">ü©∏ Blood Splatter</button>
                <button onclick="testSound('screamSound', 0.7)">üò® Scream</button>
                <button onclick="testSound('ghostSound', 0.5)">üëª Ghost</button>
                <button onclick="testSound('doorCreak', 0.6)">üö™ Door Creak</button>
                <button onclick="testSound('chainSound', 0.5)">‚õìÔ∏è Chain Rattle</button>
            </div>
        </div>

        <!-- Test Section 3: Volume Tests -->
        <div class="test-section">
            <h2>3Ô∏è‚É£ Volume Tests</h2>
            <p>Test volume levels berbeda</p>
            <div class="button-grid">
                <button onclick="testVolumeLevel('jumpScareSound', 0.1)">üîâ 10% Volume</button>
                <button onclick="testVolumeLevel('jumpScareSound', 0.3)">üîä 30% Volume</button>
                <button onclick="testVolumeLevel('jumpScareSound', 0.5)">üîä 50% Volume</button>
                <button onclick="testVolumeLevel('jumpScareSound', 1.0)">üîä 100% Volume</button>
            </div>
        </div>

        <!-- Test Section 4: Gallery Horror Simulation -->
        <div class="test-section">
            <h2>4Ô∏è‚É£ Gallery Horror Effects</h2>
            <p>Simulasi efek gallery hover dan click</p>
            <div class="button-grid">
                <button onclick="testGalleryHover()">üñ±Ô∏è Hover Effect</button>
                <button onclick="testGalleryClick()">üëÜ Click Effect</button>
                <button onclick="testModalOpen()">üñºÔ∏è Modal Open</button>
                <button onclick="testRandomHorror()">üé≤ Random Horror</button>
            </div>
        </div>

        <!-- Audio Status -->
        <div class="test-section">
            <h2>üì° Audio Status</h2>
            <div id="audioStatus" class="audio-info">
                <div class="audio-card">
                    <h3>Loading...</h3>
                    <p>Click "Check Status" to see details</p>
                </div>
            </div>
        </div>

        <!-- Console Output -->
        <div class="test-section">
            <h2>üíª Console Output</h2>
            <button class="clear-btn" onclick="clearConsole()">üóëÔ∏è Clear Console</button>
            <div id="consoleOutput" class="console-output">
                <div class="log-line log-info">üîç Ready to test audio... Click "Unlock Audio" to start!</div>
            </div>
        </div>
    </div>

    <script>
        // Audio variables
        let audioUnlocked = false;
        let audioElements = {};

        // Console logging
        function log(message, type = 'info') {
            const consoleDiv = document.getElementById('consoleOutput');
            const timestamp = new Date().toLocaleTimeString();
            const logLine = document.createElement('div');
            logLine.className = `log-line log-${type}`;
            
            let icon = '';
            switch(type) {
                case 'success': icon = '‚úÖ'; break;
                case 'error': icon = '‚ùå'; break;
                case 'warning': icon = '‚ö†Ô∏è'; break;
                case 'info': icon = '‚ÑπÔ∏è'; break;
            }
            
            logLine.textContent = `[${timestamp}] ${icon} ${message}`;
            consoleDiv.appendChild(logLine);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            
            // Also log to browser console
            console.log(`${icon} ${message}`);
        }

        function clearConsole() {
            document.getElementById('consoleOutput').innerHTML = '';
            log('Console cleared', 'info');
        }

        // Preload all audio
        async function preloadAllAudio() {
            log('üîì Starting audio unlock process...', 'info');
            
            const audioIds = [
                'jumpScareSound',
                'bloodSplatterSound',
                'screamSound',
                'ghostSound',
                'doorCreak',
                'chainSound'
            ];
            
            let successCount = 0;
            let failCount = 0;
            
            for (const id of audioIds) {
                const audio = document.getElementById(id);
                if (!audio) {
                    log(`‚ùå Audio element not found: ${id}`, 'error');
                    failCount++;
                    continue;
                }
                
                audioElements[id] = audio;
                
                try {
                    // Load audio
                    audio.load();
                    log(`üì• Loading ${id}...`, 'info');
                    
                    // Try to play with very low volume (unlock trick)
                    audio.volume = 0.01;
                    await audio.play();
                    log(`‚ñ∂Ô∏è Playing ${id} (silent test)...`, 'info');
                    
                    // Immediately pause
                    audio.pause();
                    audio.currentTime = 0;
                    audio.volume = 0.8; // Reset to normal volume
                    
                    log(`‚úÖ ${id} ready!`, 'success');
                    successCount++;
                    
                } catch (error) {
                    log(`‚ùå Failed to unlock ${id}: ${error.message}`, 'error');
                    failCount++;
                }
            }
            
            audioUnlocked = true;
            log(`\nüéâ Preload complete: ${successCount} success, ${failCount} failed`, 
                failCount > 0 ? 'warning' : 'success');
            
            checkAudioStatus();
        }

        // Check audio status
        function checkAudioStatus() {
            log('üìä Checking audio status...', 'info');
            
            const statusDiv = document.getElementById('audioStatus');
            statusDiv.innerHTML = '';
            
            const audioIds = [
                'jumpScareSound',
                'bloodSplatterSound',
                'screamSound',
                'ghostSound',
                'doorCreak',
                'chainSound'
            ];
            
            audioIds.forEach(id => {
                const audio = document.getElementById(id);
                const card = document.createElement('div');
                card.className = 'audio-card';
                
                let status = 'error';
                let statusText = 'Not Loaded';
                
                if (audio) {
                    if (audio.readyState === 4) {
                        status = 'ready';
                        statusText = 'Ready';
                    } else if (audio.readyState > 0) {
                        status = 'loading';
                        statusText = 'Loading...';
                    }
                }
                
                card.innerHTML = `
                    <h3>
                        <span class="status-indicator status-${status}"></span>
                        ${id.replace('Sound', '')}
                    </h3>
                    <p><strong>Status:</strong> ${statusText}</p>
                    <p><strong>Ready State:</strong> ${audio ? audio.readyState : 'N/A'}</p>
                    <p><strong>Duration:</strong> ${audio && audio.duration ? audio.duration.toFixed(2) + 's' : 'Unknown'}</p>
                    <p><strong>Volume:</strong> ${audio ? (audio.volume * 100).toFixed(0) + '%' : 'N/A'}</p>
                `;
                
                statusDiv.appendChild(card);
            });
            
            log('‚úÖ Status check complete', 'success');
        }

        // Test browser support
        function testBrowserSupport() {
            log('üåê Testing browser support...', 'info');
            
            const audio = new Audio();
            const canPlayMP3 = audio.canPlayType('audio/mpeg');
            const canPlayOGG = audio.canPlayType('audio/ogg');
            const canPlayWAV = audio.canPlayType('audio/wav');
            
            log(`üéµ MP3 Support: ${canPlayMP3 || 'No'}`, canPlayMP3 ? 'success' : 'error');
            log(`üéµ OGG Support: ${canPlayOGG || 'No'}`, canPlayOGG ? 'success' : 'warning');
            log(`üéµ WAV Support: ${canPlayWAV || 'No'}`, canPlayWAV ? 'success' : 'warning');
            
            log(`üì± User Agent: ${navigator.userAgent}`, 'info');
            log(`üîä Audio Context: ${window.AudioContext ? 'Supported' : 'Not supported'}`, 
                window.AudioContext ? 'success' : 'error');
        }

        // Test individual sound
        async function testSound(audioId, volume = 0.8) {
            log(`üîä Testing ${audioId} at ${(volume * 100).toFixed(0)}% volume...`, 'info');
            
            if (!audioUnlocked) {
                log('‚ö†Ô∏è Audio not unlocked! Click "Unlock Audio" first!', 'warning');
                return;
            }
            
            const audio = audioElements[audioId] || document.getElementById(audioId);
            
            if (!audio) {
                log(`‚ùå Audio not found: ${audioId}`, 'error');
                return;
            }
            
            try {
                audio.currentTime = 0;
                audio.volume = volume;
                await audio.play();
                log(`‚úÖ Playing ${audioId} successfully!`, 'success');
                
                audio.onended = () => {
                    log(`‚èπÔ∏è ${audioId} finished playing`, 'info');
                };
                
            } catch (error) {
                log(`‚ùå Failed to play ${audioId}: ${error.message}`, 'error');
            }
        }

        // Test volume levels
        async function testVolumeLevel(audioId, volume) {
            await testSound(audioId, volume);
        }

        // Gallery hover simulation
        async function testGalleryHover() {
            log('üñ±Ô∏è Simulating gallery hover...', 'info');
            
            if (Math.random() > 0.7) {
                log('‚ùå Hover sound skipped (30% chance failed)', 'warning');
                return;
            }
            
            const sounds = ['ghostSound', 'chainSound', 'doorCreak'];
            const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
            
            log(`üëª Hover triggered: ${randomSound}`, 'success');
            await testSound(randomSound, 0.15);
        }

        // Gallery click simulation
        async function testGalleryClick() {
            log('üëÜ Simulating gallery click...', 'info');
            
            if (Math.random() > 0.6) {
                log('‚ùå Click sound skipped (40% chance failed)', 'warning');
                return;
            }
            
            setTimeout(async () => {
                const sounds = ['screamSound', 'ghostSound'];
                const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
                
                log(`üò± Click triggered: ${randomSound}`, 'success');
                await testSound(randomSound, 0.25);
            }, 100);
        }

        // Modal open simulation
        async function testModalOpen() {
            log('üñºÔ∏è Simulating modal open...', 'info');
            
            if (Math.random() > 0.5) {
                log('‚ùå Modal horror skipped (50% chance failed)', 'warning');
                return;
            }
            
            setTimeout(async () => {
                const horrorTypes = [
                    { sound: 'ghostSound', volume: 0.4, name: 'Ghost Whisper' },
                    { sound: 'doorCreak', volume: 0.5, name: 'Eyes Flash + Door' },
                    { sound: 'chainSound', volume: 0.35, name: 'Chain Rattle' },
                    { sound: 'screamSound', volume: 0.4, name: 'Scream' },
                    { sound: null, volume: 0, name: 'Red Flash (Silent)' }
                ];
                
                const horror = horrorTypes[Math.floor(Math.random() * horrorTypes.length)];
                
                log(`üéÉ Modal horror: ${horror.name}`, 'success');
                
                if (horror.sound) {
                    await testSound(horror.sound, horror.volume);
                } else {
                    log('üî¥ Red flash effect (visual only)', 'info');
                }
            }, 300);
        }

        // Random horror test
        async function testRandomHorror() {
            const tests = [testGalleryHover, testGalleryClick, testModalOpen];
            const randomTest = tests[Math.floor(Math.random() * tests.length)];
            await randomTest();
        }

        // Initialize
        window.addEventListener('load', function() {
            log('üéÉ Audio Debug Console loaded!', 'success');
            log('üëâ Click "Unlock Audio" to start testing', 'info');
            checkAudioStatus();
        });
    </script>
</body>
</html>
