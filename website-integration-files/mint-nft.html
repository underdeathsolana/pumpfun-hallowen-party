<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🎃 Mint Halloween NFT - Pump Halloween Party 2025</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/favicon.png">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Butcherman&family=Poppins:wght@300;400;600;700;900&family=Bebas+Neue&family=Bungee+Shade&family=Fredoka+One&display=swap" rel="stylesheet">
  
  <!-- Solana Web3.js Libraries -->
  <script src="https://unpkg.com/@solana/web3.js@1.87.6/lib/index.iife.min.js" crossorigin></script>
  <script src="https://unpkg.com/@solana/spl-token@0.3.9/lib/index.iife.min.js" crossorigin></script>
  
  <!-- Verify Libraries Loaded -->
  <script>
    window.addEventListener('DOMContentLoaded', function() {
      console.log('🎃 Checking Solana libraries...');
      
      // Check Solana Web3
      if (typeof solanaWeb3 === 'undefined') {
        console.error('❌ Solana Web3.js failed to load');
        alert('Failed to load Solana Web3 library. Please check your internet connection and refresh.');
        return;
      }
      console.log('✅ Solana Web3.js loaded:', solanaWeb3.VERSION || 'version unknown');
      
      // Check SPL Token - try multiple global names
      const splTokenLib = window.splToken || window.spl || window.SPLToken;
      if (typeof splTokenLib === 'undefined') {
        console.error('❌ SPL Token library failed to load');
        console.log('Available globals:', Object.keys(window).filter(k => k.toLowerCase().includes('spl') || k.toLowerCase().includes('token')));
      } else {
        console.log('✅ SPL Token library loaded successfully');
        console.log('SPL Token available as:', splTokenLib);
        // Make it available as window.splToken for consistency
        window.splToken = splTokenLib;
      }
    });
  </script>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/mint-page.css">
</head>
<body>
  <!-- Background Effects -->
  <div class="fog"></div>
  <div class="fog fog-2"></div>
  <canvas id="spiders"></canvas>
  
  <!-- Floating Ghosts -->
  <div class="floating-ghosts">
    <div class="ghost">👻</div>
    <div class="ghost">👻</div>
    <div class="ghost">👻</div>
  </div>
  
  <!-- Back to Home Button -->
  <a href="../index.html" class="back-home">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
      <path d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42-.39-.39-1.02-.39-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1z"/>
    </svg>
    Back to Home
  </a>
  <div class="mint-container">
    <!-- Header -->
    <div class="mint-header">
      <h1 class="mint-title">🎃 Mint Halloween NFT 🎃</h1>
      <p class="mint-subtitle">Pump Halloween Party 2025 - Exclusive Collection</p>
      <span class="network-badge">DEVNET</span>
    </div>

    <!-- Wallet Section -->
    <div class="wallet-section">
      <h2>1️⃣ Connect Wallet</h2>
      
      <div id="wallet-connect-section">
        <p>
          Connect your Phantom or Solflare wallet to mint NFT
        </p>
        <button id="connect-wallet-btn" class="btn-primary">
          👻 Connect Wallet
        </button>
      </div>

      <div id="wallet-info" class="wallet-info">
        <div>
          <p>Wallet Address:</p>
          <p class="wallet-address" id="wallet-address">-</p>
        </div>
        <div>
          <p>Balance:</p>
          <p class="wallet-balance" id="wallet-balance">- SOL</p>
        </div>
        <button id="disconnect-wallet-btn" class="btn-secondary">
          Disconnect
        </button>
      </div>
    </div>

    <!-- Mint Section -->
    <div class="mint-section">
      <h2>2️⃣ Mint Your NFT</h2>
      
      <p>
        Get 1 of 16 rare Halloween NFT collections!
      </p>

      <button id="mint-nft-btn" class="btn-primary" disabled>
        🎃 Mint Halloween NFT
      </button>

      <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Minting your NFT... Please wait...</p>
      </div>

      <div id="success-message" class="success-message">
        <h3>🎉 Mint Successful!</h3>
        <div id="nft-preview" class="nft-preview">
          <img id="nft-image" src="" alt="Your NFT">
          <p><strong id="nft-name">-</strong></p>
        </div>
        <p>
          Transaction: 
          <a id="explorer-link" href="#" target="_blank" class="explorer-link">View on Explorer</a>
        </p>
      </div>

      <div id="error-message" class="error-message">
        <h3>❌ Mint Failed</h3>
        <p id="error-text">-</p>
      </div>

      <div class="mint-stats">
        <p>You have minted: <strong id="mint-count">0</strong> NFT(s)</p>
      </div>
    </div>

    <!-- Info Section -->
    <div class="mint-info">
      <p>⚠️ Make sure your wallet is switched to <strong>Devnet/TESTNET</strong></p>
      <p>💰 Need test SOL? Visit: <code>https://faucet.solana.com/</code></p>
      <p>🎃 Total Supply: 16 Unique Halloween NFTs</p>
    </div>
  </div>

  <!-- JavaScript Files -->
  <script>
    // Initialize app when page loads
    console.log('🎃 Pump Halloween Party - NFT Mint Page');
    console.log('Program ID: 2QHgBJFgBcsBCuHfPezqdZRDjFNu2Du2p1JGR6Dk6zKf');
    console.log('Network: Devnet');
  </script>
  
  <!-- Background Effects -->
  <script src="js/mint-page-effects.js"></script>
  
  <!-- Solana Integration -->
  <script src="js/solana-config.js"></script>
  <script src="js/solana-wallet.js"></script>
  <script src="js/solana-mint.js"></script>
  <script src="js/mint-page-controller.js"></script>
</body>
</html>
